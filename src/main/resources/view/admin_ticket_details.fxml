<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns:fx="http://javafx.com/fxml" fx:controller="tn.finhub.controller.AdminTicketDetailsController"
      spacing="15" style="-fx-padding: 20; -fx-background-color: -color-bg-default;">

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 0 0 10 0; -fx-border-color: transparent transparent -color-card-border transparent; -fx-border-width: 0 0 1 0;">
        <Button styleClass="button-back" onAction="#handleBack" style="-fx-border-color: rgba(255,255,255,0.2); -fx-background-color: rgba(255,255,255,0.05);">
            <graphic>
                <SVGPath content="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" style="-fx-fill: white;" scaleX="1.2" scaleY="1.2"/>
            </graphic>
        </Button>
        <VBox spacing="4">
            <Label fx:id="subjectLabel" text="Ticket Subject" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label fx:id="statusLabel" text="OPEN" style="-fx-text-fill: white; -fx-padding: 2 10; -fx-background-radius: 12; -fx-font-size: 10px; -fx-font-weight: bold;"/>
                <Label fx:id="userLabel" text="User Name" style="-fx-text-fill: -color-text-secondary; -fx-font-size: 12px;"/>
            </HBox>
        </VBox>
        <Region HBox.hgrow="ALWAYS"/>
        
        <Button text="Resolve Ticket" fx:id="resolveButton" onAction="#handleResolve" style="-fx-background-color: -color-success; -fx-text-fill: white; -fx-font-weight: bold;">
             <graphic>
                <SVGPath content="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" style="-fx-fill: white;"/>
            </graphic>
        </Button>
    </HBox>

    <!-- Messages Area -->
    <ScrollPane fx:id="scrollPane" fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent; -fx-background: transparent; -fx-padding: 0;">
        <VBox fx:id="messagesContainer" spacing="10" style="-fx-padding: 10;"/>
    </ScrollPane>

    <!-- Reply Area -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10; -fx-background-color: -color-bg-subtle; -fx-background-radius: 20;">
        <TextField fx:id="replyField" promptText="Reply as Admin..." HBox.hgrow="ALWAYS" style="-fx-background-color: transparent; -fx-text-fill: -color-text-primary;" onAction="#handleSend"/>
        <Button text="Send" styleClass="button-primary" onAction="#handleSend" fx:id="sendButton">
             <graphic>
                <SVGPath content="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" style="-fx-fill: white;" scaleX="0.8" scaleY="0.8"/>
            </graphic>
        </Button>
    </HBox>

</VBox>
