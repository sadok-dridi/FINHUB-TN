<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="tn.finhub.controller.SellerProfileController"
      spacing="25" styleClass="dialog-pane"
      prefWidth="400" alignment="TOP_CENTER"
      style="-fx-background-color: -color-bg-paper; -fx-background-radius: 16; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 20, 0, 0, 10);">

    <padding>
        <Insets top="40" right="30" bottom="40" left="30"/>
    </padding>

    <!-- Header: Trust Score & Avatar -->
    <StackPane alignment="CENTER">
        <!-- Trust Score Ring -->
        <Circle radius="60" style="-fx-fill: transparent; -fx-stroke: -color-bg-subtle; -fx-stroke-width: 8;"/>
        <Circle fx:id="trustScoreRing" radius="60" style="-fx-fill: transparent; -fx-stroke: -color-primary; -fx-stroke-width: 8; -fx-stroke-dash-array: 0 1000; -fx-rotate: -90;"/>
        
        <!-- Avatar / Initials -->
        <StackPane>
            <Circle radius="45" style="-fx-fill: -color-bg-subtle;"/>
            <Label fx:id="initialsLabel" text="JD" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: -color-text-primary;"/>
        </StackPane>
        
        <!-- Trust Score Badge -->
        <VBox alignment="CENTER" translateY="50">
             <Label fx:id="trustScoreLabel" text="95" style="-fx-background-color: -color-bg-paper; -fx-background-radius: 12; -fx-padding: 2 10; -fx-font-weight: bold; -fx-text-fill: -color-primary; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);"/>
        </VBox>
    </StackPane>

    <!-- User Info -->
    <VBox alignment="CENTER" spacing="5">
        <HBox alignment="CENTER" spacing="8">
            <Label fx:id="nameLabel" text="John Doe" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: -color-text-primary;"/>
            <SVGPath fx:id="verifiedBadge" content="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" scaleX="0.8" scaleY="0.8" style="-fx-fill: -color-success;" visible="false"/>
        </HBox>
        <Label fx:id="emailLabel" text="john@example.com" style="-fx-text-fill: -color-text-secondary;"/>
        <Label text="FinHub Member since 2024" style="-fx-text-fill: -color-text-muted; -fx-font-size: 11px;"/>
    </VBox>

    <!-- Stats Grid -->
    <HBox spacing="15" alignment="CENTER">
        <!-- Total Deals -->
        <VBox style="-fx-background-color: -color-bg-subtle; -fx-background-radius: 12; -fx-padding: 15; -fx-min-width: 100;" alignment="CENTER">
            <Label text="Deals" style="-fx-text-fill: -color-text-secondary; -fx-font-size: 12px;"/>
            <Label fx:id="totalDealsLabel" text="24" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: -color-text-primary;"/>
        </VBox>

        <!-- Success Rate -->
        <VBox style="-fx-background-color: -color-bg-subtle; -fx-background-radius: 12; -fx-padding: 15; -fx-min-width: 100;" alignment="CENTER">
            <Label text="Success" style="-fx-text-fill: -color-text-secondary; -fx-font-size: 12px;"/>
            <Label fx:id="successRateLabel" text="100%" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: -color-success;"/>
        </VBox>
        
        <!-- Volume -->
        <VBox style="-fx-background-color: -color-bg-subtle; -fx-background-radius: 12; -fx-padding: 15; -fx-min-width: 100;" alignment="CENTER">
            <Label text="Volume" style="-fx-text-fill: -color-text-secondary; -fx-font-size: 12px;"/>
            <Label fx:id="volumeLabel" text="5k" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: -color-text-primary;"/>
        </VBox>
    </HBox>

    <!-- Actions -->
    <VBox spacing="10">
        <Button fx:id="startEscrowBtn" text="Start Safe Transaction" maxWidth="Infinity" styleClass="button-primary" style="-fx-padding: 12;"/>
        <Button fx:id="saveContactBtn" text="Add to Trust Network" maxWidth="Infinity" styleClass="button-outlined" style="-fx-padding: 12;"/>
        <Button text="Close" onAction="#handleClose" maxWidth="Infinity" style="-fx-background-color: transparent; -fx-text-fill: -color-text-muted;"/>
    </VBox>

</VBox>
